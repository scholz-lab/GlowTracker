#:import Factory kivy.factory.Factory

<MenuBarWidget>:
	BoxLayout:
		size: root.size
		pos: root.pos
		id: boxlayout_h
		spacing: 20
		orientation: 'horizontal'
		Button:
		    text: 'Homing'
		    on_press: root.home()
		Button:
		    text: 'Axes Limit'
		    on_press: Factory.AxisLimitsPopup().open()
		Button:
		    text: 'Recording settings'
		    on_press: Factory.RecordingSettingsPopup().open()
		Button:
		    text: 'Exit'
		    on_press: root.exit_app()

<RecordingSettingsPopup>:
	auto_dismiss: False
	title: 'Recording Settings'
	size_hint: .5, .5
	GridLayout:
	    size: root.size
	    cols: 3
	    rows: 4
	    Label:
	        text: 'Exposure time'
	    TextInput:
	        multiline: False
	        size_hint_y: 15
	    Button:
	        text: 'Save'
	        on_press: root.save_exposuretime()
	    Label:
	        text: 'Gain'
	    TextInput:
	        multiline: False
	        size_hint_y: 15
	    Button:
	        text: 'Save'
	        on_press: root.save_gain()
	    Label:
	        text: 'Number of frames to record'
	    TextInput:
	        multiline: False
	        size_hint_y: 15
	    Button:
	        text: 'Save'
	        on_press: root.save_recordingtime()
	    Label:
	        text: ' '
	    Label:
	        text: ' '
	    Button:
	        text: 'Close Recording Settings'
	        size_hint_y: 10
	        on_press: root.dismiss()

<AxisLimitsPopup>:
	auto_dismiss: False
	title: 'Axes Upper Limit Settings'
	size_hint: .5, .5
	GridLayout:
	    size: root.size
	    cols: 3
	    rows: 4
	    Label:
	        text: 'x axis [mm]'
	    TextInput:
	        multiline: False
	        size_hint_y: 15
	    Label:
	        text: 'current limit: '
	    Label:
	        text: 'y axis [mm]'
	    TextInput:
	        multiline: False
	        size_hint_y: 15
	    Label:
	        text: 'current limit: '
	    Label:
	        text: 'z axis [mm]'
	    TextInput:
	        multiline: False
	        size_hint_y: 15
	    Button:
	        text: 'current limit: '
	    Label:
	        text: ' '
	    Label:
	        text: ' '
	    Button:
	        text: 'Close Axes Limit Settings'
	        size_hint_y: 10
	        on_press: root.dismiss()


<FunctionCallsWidget>:
	BoxLayout:
		orientation: 'vertical'
		size: root.size
		pos: root.pos
		spacing: 20
		Button:
		    text: 'Calibrate stage'
		    on_press: root.calibrate_stage()
		Button:
		    text: 'Center'
		    on_press: root.center()
		Button:
		    text: 'Autofocus'
		    on_press: root.autofocus()
		Button:
		    text: 'Start recording'
		    on_press: root.recording()

<XControls>:
	BoxLayout:
		orientation: 'horizontal'
		size: root.size
		pos: root.pos
		Button:		    
		    background_normal: 'LeftButtonNormal_Double.jpg'
		    background_down: 'LeftButtonOnPress_Double.jpg'
		    on_press: root.moveX_bigStepLeft()
		Button:
		    background_normal: 'LeftButtonNormal.jpg'
		    background_down: 'LeftButtonOnPress.jpg'
		    on_press: root.moveX_smallStepLeft()
		Label:
		    text: 'x axis'
		Button:
		    background_normal: 'RightButtonNormal.jpg'
		    background_down: 'RightButtonOnPress.jpg'
		    on_press: root.moveX_smallStepRight()
		Button:
		    background_normal: 'RightButtonNormal_Double.jpg'
		    background_down: 'RightButtonOnPress_Double.jpg'
		    on_press: root.moveX_bigStepRight()

<YControls>:
	BoxLayout:
		orientation: 'horizontal'
		size: root.size
		pos: root.pos
		Button:		    
		    background_normal: 'LeftButtonNormal_Double.jpg'
		    background_down: 'LeftButtonOnPress_Double.jpg'
		    on_press: root.moveY_bigStepLeft()
		Button:
		    background_normal: 'LeftButtonNormal.jpg'
		    background_down: 'LeftButtonOnPress.jpg'
		    on_press: root.moveY_smallStepLeft()
		Label:
		    text: 'y axis'
		Button:
		    background_normal: 'RightButtonNormal.jpg'
		    background_down: 'RightButtonOnPress.jpg'
		    on_press: root.moveY_smallStepRight()
		Button:
		    background_normal: 'RightButtonNormal_Double.jpg'
		    background_down: 'RightButtonOnPress_Double.jpg'
		    on_press: root.moveY_bigStepRight()


<ZControls>:
	BoxLayout:
		orientation: 'horizontal'
		size: root.size
		pos: root.pos
		Button:		    
		    background_normal: 'LeftButtonNormal_Double.jpg'
		    background_down: 'LeftButtonOnPress_Double.jpg'
		    on_press: root.moveZ_bigStepLeft()
		Button:
		    background_normal: 'LeftButtonNormal.jpg'
		    background_down: 'LeftButtonOnPress.jpg'
		    on_press: root.moveZ_smallStepLeft()
		Label:
		    text: 'z axis'
		Button:
		    background_normal: 'RightButtonNormal.jpg'
		    background_down: 'RightButtonOnPress.jpg'
		    on_press: root.moveZ_smallStepRight()
		Button:
		    background_normal: 'RightButtonNormal_Double.jpg'
		    background_down: 'RightButtonOnPress_Double.jpg'
		    on_press: root.moveZ_bigStepRight()


<ControlsWidget>:
	BoxLayout:
		orientation: 'vertical'
		size: root.size
		pos: root.pos
		Label:
		    text: 'Axis controls'
		XControls:
		YControls:
		ZControls:


<FunctionalBodyWidget>:
	BoxLayout:
		orientation: 'horizontal'
		FunctionCallsWidget:
		ControlsWidget:
		

<OverallMenu>:
	GridLayout:
		size: root.size
		cols: 1
		rows: 3
		spacing: 50
		MenuBarWidget:
		    height: 100
		    size_hint_y: None
		FunctionalBodyWidget:
		Label:
		    height: 50
		    size_hint_y: None
		    text: 'kernel info'
		    pos_hint: {'right': 1}


<CameraWidget>:
	BoxLayout:
	    orientation: 'vertical'
	    Camera:
	        id: camera
	        index: 0
	        play: False
	        resolution: (2064, 3088)
	    ToggleButton:
	        text: 'Play'
	        on_press: camera.play = not camera.play
	        size_hint_y: None
	        height: '48dp'

<MainBoxWidget>:
	BoxLayout:
	    size: root.size
	    pos: root.pos
	    spacing: 20
	    orientation: 'horizontal'
	    OverallMenu:
	    CameraWidget:



